// Lichtspiele Schlafzimmer....

val String filename = "lichtspiele_schlafzimmer"

rule "daylight_colour_temp_schlafzimmer"
when
    // recompute every 60 seconds
    Time cron "45 * * ? * * *"
then
  if ((ExtendedColorLight_Color_bedroom.state as PercentType).intValue <= 0) {
    return
  }
  val current = (ExtendedColorLight_ColorTemperature_bedroom.state as PercentType).intValue
  val desired = (DaylightCT.state as PercentType).intValue
  if (Math.abs(current - desired) >= 1) {
    ExtendedColorLight_ColorTemperature_bedroom.sendCommand(Math.round(0.9*current + 0.1*desired + Math.signum(desired - current)))
  }
end