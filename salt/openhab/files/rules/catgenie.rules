rule "TurnOffCatGeniePower"

when
	Time cron "0 24 14 ? * *" or 
	Item CatGenieTimer changed from ON to OFF or
	Item CatGeniePower changed
then
    var Number CatGenieWatts = CatGeniePower.state as Number
	logInfo("TurnOffCatGeniePower", "current power: " + CatGeniePower)

    if(CatGenieWatts > 1){                       	// adjust the power in watts as needed
		logInfo("TurnOffCatGeniePower", "Starting CatGenie Power Timer becase power consumption currently " + CatGenieWatts.state.toString)
        CatGenieTimer.sendCommand(ON)    	// turn on timer with expire binding for 20 min
    }
    else(CatGenieTimer.state == OFF){
        CatGenieSwitch.sendCommand(OFF)   		// turn power off if no cleaning cycle
    }
end

rule "TurnOnCatGeniePower"
when
	Time cron "0 0 9 ? * *"    				// power on at 9am every day
then
    CatGenieSwitch.sendCommand(ON)
end

rule "DebugCatGenie"
when 
    Item CatGeniePower received update
then
    logInfo("CatgeniePower", "Power: " + CatGeniePower.state.toString)
end